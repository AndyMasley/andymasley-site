---
import Base from '@/layouts/Base.astro';
import { physicsTopics, getTotalVideoCount } from '@/lib/physics-videos';

const totalVideos = getTotalVideoCount();
---

<Base title="IB Physics" description="Video lectures for the full IB Physics curriculum">
  <div class="page-header">
    <h2 class="page-header__title">IB Physics</h2>
    <p class="page-header__description">
      I taught high school physics for 7 years and made and collected lots of online resources for my students. This page has everything useful I can share from my time teaching, most importantly the {totalVideos} animated video lectures I made for the IB Physics SL curriculum. 
    </p>
  </div>

  <hr class="divider" />

  <div class="section-title">Video Lectures</div>
  <div class="physics-intro">
    <p>
      Below are all my IB physics videos, also hosted on <a href="https://www.youtube.com/@andymasley" target="_blank" rel="noopener">My YouTube channel</a>. I only taught IB physics SL and don't have time to make HL videos right now. If you're looking for HL resources <a href="https://www.youtube.com/@donerphysics" target="_blank" rel="noopener">Chris Doner</a> and <a href="https://www.youtube.com/@siriusrevision" target="_blank" rel="noopener">Sirius Revision</a> both have great videos on IB HL topics!
    </p>
    <p>
      I made these videos under the old curriculum. I reorganized them into the new curriculum. There's a chance there are some inconsistencies between the old and new curricula but so far not many have come up! A few topics are missing because they didn't exist under the old curriculum.
    </p>
  </div>

  {physicsTopics.map(topic => (
    <details class="unit-dropdown">
      <summary>
        {topic.name}
        <span class="count">({topic.subtopics.reduce((sum, s) => sum + s.videos.length, 0)})</span>
      </summary>

      <div class="unit-content">
        {topic.subtopics.map(subtopic => (
          <details class="topic-dropdown">
            <summary>
              {subtopic.name}
              <span class="count">({subtopic.videos.length})</span>
            </summary>

            <div class="topic-content">
              {subtopic.videos.map(video => (
                <a href={video.url} target="_blank" rel="noopener">
                  {video.title}
                </a>
              ))}
            </div>
          </details>
        ))}
      </div>
    </details>
  ))}

  <hr class="divider" />

  <div class="back-link">
    <a href="/">← home</a>
  </div>
</Base>

<style>
  .section-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 12px;
  }

  .physics-intro {
    font-size: 0.875rem;
    color: var(--text);
    margin-bottom: 1.5rem;
  }

  .physics-intro p {
    margin-bottom: 0.75em;
  }

  .physics-intro a {
    color: var(--accent);
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .physics-intro a:hover {
    text-decoration: none;
  }

  /* Unit dropdowns (outer) */
  .unit-dropdown {
    margin-bottom: 4px;
  }

  .unit-dropdown > summary {
    padding: 8px 0;
    font-size: 0.95rem;
    font-weight: 600;
    color: var(--text);
    cursor: pointer;
    list-style: none;
  }

  .unit-dropdown > summary::-webkit-details-marker {
    display: none;
  }

  .unit-dropdown > summary::before {
    content: '▶';
    display: inline-block;
    font-size: 0.6rem;
    margin-right: 10px;
    color: var(--dim);
    transition: transform 0.2s ease;
  }

  .unit-dropdown[open] > summary::before {
    transform: rotate(90deg);
  }

  .unit-dropdown > summary:hover {
    color: var(--accent);
  }

  .unit-content {
    margin-left: 20px;
    padding-bottom: 8px;
  }

  /* Topic dropdowns (inner) */
  .topic-dropdown {
    margin-bottom: 2px;
  }

  .topic-dropdown > summary {
    padding: 6px 0;
    font-size: 0.8rem;
    color: var(--text);
    cursor: pointer;
    list-style: none;
  }

  .topic-dropdown > summary::-webkit-details-marker {
    display: none;
  }

  .topic-dropdown > summary::before {
    content: '▶';
    display: inline-block;
    font-size: 0.5rem;
    margin-right: 8px;
    color: var(--dim);
    transition: transform 0.2s ease;
  }

  .topic-dropdown[open] > summary::before {
    transform: rotate(90deg);
  }

  .topic-dropdown > summary:hover {
    color: var(--accent);
  }

  .topic-content {
    margin-left: 20px;
    padding-bottom: 8px;
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .topic-content a {
    display: block;
    font-size: 0.8rem;
    color: var(--accent);
    text-decoration: underline;
    text-underline-offset: 2px;
  }

  .topic-content a:hover {
    text-decoration: none;
  }

  .count {
    font-size: 0.65rem;
    font-weight: normal;
    color: var(--dim);
    margin-left: 4px;
  }

  /* Responsive */
  @media (max-width: 600px) {
    .unit-content {
      margin-left: 12px;
    }

    .topic-content {
      margin-left: 12px;
    }
  }
</style>

